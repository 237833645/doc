0415：
1. 评估T196用串口方式替代之前usb方式烧入客户信息


0416:
1. T60提供Gpio给客户调试2个对讲机连接在一起通信问题解决
2. 分析T60  2台售后机器开机三色灯问题，PCB是2.2的。PCB2.1之前的板子是没有问题的，2.1开始改了rgb的电路
3. A10的camera拍摄卡住的问题用第一次打样的camera是没有问题的，而二次打样的旋转90度的都有问题

0420:
@宫伟  @高山飞  @赵宝发  
相机按拍照键拍照之后拍照按键灰置无法再按

A10 camera 软件验证如下：

1. 增加camera相关电压
DVDD  1.2V  --> 增加到1.2625V
IOVDD 1.8V  --> 增加到1.8625V
AVDD   2.8V  --> 增加到2.9V

2. 将原来4lane 修改为2lane验证 fail
3. 降低mipi每lane的bps 700-> 350 , 验证fail
4. 模组厂给的datasheet文档里面没有增加mipi驱动电流的相关设置寄存器

0427:
1. 分析了工厂寄过来的按键不良灯不亮问题，ATA卡不住这些不良，修改软件并验证ATA是可以卡住不良了
2. 经过分析板子的问题都是硬件焊接不良导致的问题

0428：
1. T60客户反馈插入耳机后外发声音变小问题解决

A10E项目在A10项目基础上改板增加双mic、外放等

0508:
A10 4层fpc的camera打样回来验证了6000多次拍照没有问题

0510:
查看A10E原理图，创建A10E软件代码工程

0511:
编译h200-t196-zrk 工程，开发uart驱动通信功能，解决串口替代usb烧入串号功能

0512 - 0514:
T196完成开发uart驱动通信功能开发，已经验证屏蔽中断功能，及节点控制

0517:
T196 uart驱动开发完毕代码已经提交

0518:
验证T196正式软件测试外发版本给客户

0524:
分析T703售后机器声音不一致问题，恢复出厂设置音频参数一致了，怀疑刷机没有使用upgrade方式

0525：
T703客户反馈恢复出厂设置问题没有解决，让他们重新刷机验证（客户反馈upgrade方式重新刷机问题解决了）
T8 关闭线性充电充9停1的功能（T8项目是配置的是liner charger，之前的老项目都是配置的switch charger）
./drivers/power/mediatek/charger/mtk_linear_charging.c

        algo_data->total_charging_time = charging_time.tv_sec;

        /* discharge for 1 second and charge for 9 seconds */
+#if 0 //wangfeng add for T9 charger
        charger_dev_enable(info->chg1_dev, false);
        msleep(1000);
-
+#endif
        vbat = battery_get_bat_voltage() * 1000; /* uV */
        if (vbat > algo_data->topoff_voltage) {
                algo_data->state = CHR_TOPOFF;


上面的修改还是有问题，切换成switch changer模式

学习三极管和mos管原理

0526:
1. 继续分析T8充电问题  -->还是做了修改，如果是关机充电或者是插入充电开机都没有问题，中途插拔就又会出现充9停1的现象，
        这个还找不到代码，log里面没有任何的充电相关log，怀疑这个功能是pmu自带的功能

2. S600项目改板，修改了之前不能使用的SIM卡热插拔中断脚
3. 安装虚拟机并安装了ubuntu-server18.04，用于学习编程及开发板使用


0527：
S600项目后续改板v1.1，修改了之前不能使用的SIM卡热插拔中断脚，支持热插拔的软件只能适用在改板后的主板，老主板用新软件会出现不识别SIM卡问题,软件做了分支出理

问题：T8：飞行模式平均电流16.9mA，最小电流12mA，标准≤5mA 注：其他未测，请先解决此问题后再测试其他电流。
分析电流： 目前是16mA的低电流，通过拔掉TP、LCD、CAMERA、还是16mA,进过量测发现LCD的转换芯片没有下电，查看代码、回忆起以前睡眠关闭转换芯片的电，唤醒会花屏、
查看代码发现系统在内核未实现SPI的功能，也就是说SPI初始化LCD只是在lk阶段起的效果，由于内核spi功能非常复杂，经过查看lcd端是可以不重新初始化，睡眠唤醒对lcd的转换芯片
进行重新上下电并初始化，是可以解决掉此问题的

0528:
t8项目低电流问题和LCD有关，目前不能关闭任何的电，关闭后唤醒就不能显示，主要是之前SPI内核驱动为开发，现在需要开发（放弃）
\\192.168.1.12\rinlink-12\rinlink\platform_o1_6739\kernel-4.4\drivers\spi\spi-mt65xx.c
\\192.168.1.12\rinlink-12\rinlink\platform_o1_6739\kernel-4.4\drivers\spi\spi-mt65xx-dev.c
\\192.168.1.12\rinlink-12\rinlink\platform_o1_6739\kernel-4.4\drivers\misc\mediatek\dws\mt6739\h900_1g.dws


0531:
t8 lcd驱动代码整理

1. 选用其他gpio的操作方式  request——gpio （放弃）

dts t8_lcm_gpio

arch/arm/boot/dts/mt6739.dts
GPIO_SIM1_SCLK = <&pio 77 0>;

2. 抓取SPI各个工作阶段的时序，去掉模拟SPI函数里所有阶段的delay，逻辑分析仪器出来的波形好看点了，存在问题，睡眠的时候SPI的CS和CLK电平状态一直在乱跳
   将SPI3个脚都设置为默认下拉，在初始化结束的时候拉低3个脚的电平，这样修改验证不乱跳了
3. 在内核模拟SPI时不能用任何delay函数，会导致初始化函数调度时间变长，导致初始化要6S时间
4. lcd的代码都已经编写完毕，现在模拟SPI在内核是可以正常工作的（还是使用默认的dts方案，不加入delay就可以模拟spi了），现在出现了唤醒重启问题
5. eng版本抓取UART LOG分析重启原因
        重启问题是因为i2c的client为空，i2c操作导致了重启，查看发现在内核的ICN6211这个芯片驱动程序注册是有问题的，没有和dts的名字对应导致了i2c的clinet为空，对应后不重启
        但是还是不能唤醒全下电的系统。

0601：        
6. 最后只对ICN6211这个转换芯片进行下电，LCD不做下电处理，只写入LCD睡眠和唤醒指令，这样最后的低点亮恢复到之前做实验强制断电的6mA

0603:
1. 继续linux-kernel编程学习

0604:
1. debug_fs内核编程

0607 - 0609:
S600项目ATA测试功能开发
[x] LED功能植入                (ok)    移植之前S915项目的ata代码
[x] LCD测试画面显示             (ok)    加入了画面显示色彩测试 
[x] GPS信号测试很难pass         (ok)    发现正常开机模式GPS是可以工作的，但是factory的gps是不能工作的, 
[x] SIM卡测试，只有一个SIM卡     (ok)    修改工模双卡为单卡，主要在测试的时候出现SIM2失败
[x] SIM信号测试功能验证         （ok）    
[x] 按键功能对应值导入           (ok)
[x] MIC测试功能开发导入          (ok)    freq 800-1200 amp 10000  100000000   factory.ini文件修改为Audio.Mic.Sets=0,1;
[x] TP测试功能开发              (waiting) 平台默认给的TP自动测试就是判断TP是否有初始化ok，这个是有瑕疵的，没有对TP的中断进行测试，目前不做修改
[x] RJ45测试功能开发            

0609：
RJ45 S600项目ATA测试功能开发

打开RJ45控制开关
echo 1 1 > /sys/devices/virtual/gpio_ctrl/gpio_ctrl/gpio_ctrl_en
echo 2 1 > /sys/devices/virtual/gpio_ctrl/gpio_ctrl/gpio_ctrl_en

关闭RJ45控制开关
echo 1 0 > /sys/devices/virtual/gpio_ctrl/gpio_ctrl/gpio_ctrl_en
echo 2 0 > /sys/devices/virtual/gpio_ctrl/gpio_ctrl/gpio_ctrl_en

开发步骤：
1. 内置 rtunicpg-arm-cortex 和 EF8152B.cfg 到文件系统中, 文件源放到vendor/mediatek/proprietary/external/目录下面
2. 编写 代码 （暂停开发，需要先解决下面h603_tm7-plus飞线手咪调试）


h603_tm7-plus飞线手咪调试 (客户拿来一个像电话机的手咪)

调试背景：
电话前端有个类似hall的中断，在接受到的时候认为挂断手咪，反之是拿起，由于之前h603_tm7-plus的手咪不兼容，所以做了飞线处理，将原来系统的音频源直接飞到手咪上

调试需要解决的问题：
  1.手咪听筒有滋滋的电流声 
  2.接收对讲时手咪和车台喇叭都会发出声音 （由于飞线公用了一个音频发射源，所以在发声的时候会导致手咪上的喇叭和机器上的喇叭同时发声）
  3. 电话手咪挂上时手咪听筒和车台喇叭都会有声音 （由于飞线公用了一个音频发射源，所以在发声的时候会导致手咪上的喇叭和机器上的喇叭同时发声）
  4.手咪音量键调节无效  （这个是有用的，由于手咪上面的音量调节自带了音频PA）

调试思路：
1. 接收到手咪中断判断使用状态，如果是拿起状态，关闭主机音频PA使能功能，且发送按键消息给到APP
2. 由于音频源飞线到手咪上，主板手咪上是没有音频输出信号的，所以公用了RST_9523B这个引脚，所以要对这个角进行配置输入态

GPIO10 - 中断信号
GPIO7  - 音频信号，需要对这个gpio进行输入设置
GPIO91 - PA使能信号




adp5585
aw9523